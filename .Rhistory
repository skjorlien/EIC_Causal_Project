library(readr)
pov_demos_combined <- read_csv("data/clean/pov_demos_combined.csv")
View(pov_demos_combined)
df <- read_csv(here("data/clean/pov_demos_combined.csv"))
df <- read_csv(here("data/clean/pov_demos_combined.csv"))
View(df)
data(smoking)
library(tidyverse)
library(haven)
library(Synth)
library(devtools)
library(SCtools)
install.packages("Synth")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("SCtools")
library(tidyverse)
library(haven)
library(Synth)
library(devtools)
library(SCtools)
?dataprep
df_out <- dataprep(
foo = df,
predictors = c(df$[4:39]),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
head(df)
df_out <- dataprep(
foo = df,
predictors = c(b_h_f_18to64:b_n_f_18to64),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df_out <- dataprep(
foo = df,
predictors = c(b_h_f_18to64:b_n_f_18to64),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64":"b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df$fips <- as.numeric(df$fips)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
read_data <- function(df)
{
full_path <- paste("https://raw.github.com/scunning1975/mixtape/master/",
df, sep = "")
df <- read_dta(full_path)
return(df)
}
texas <- read_data("texas.dta") %>%
as.data.frame(.)
View(texas)
dataprep_out <- dataprep(
foo = texas,
predictors = c("poverty", "income"),
predictors.op = "mean",
time.predictors.prior = 1985:1993,
special.predictors = list(
list("bmprison", c(1988, 1990:1992), "mean"),
list("alcohol", 1990, "mean"),
list("aidscapita", 1990:1991, "mean"),
list("black", 1990:1992, "mean"),
list("perc1519", 1990, "mean")),
dependent = "bmprison",
unit.variable = "statefip",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 48,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 1985:1993,
time.plot = 1985:2000
)
df <- as.data.frame(df)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:36,37:42, 44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:36,38:42, 44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df$pov_tot <- as.numeric(df$pov_tot)
df$pov_tot <- readr::parse_number(df$pov_tot)
df <- read_csv(here("data/clean/pov_demos_combined.csv"))
# installs the librarian package if you don't have it
if (!("librarian" %in% rownames(utils::installed.packages()))) {
utils::install.packages("librarian")
}
# put all of the packages that you import here
librarian::shelf(
cran_repo = "https://cran.microsoft.com/", # Dallas, TX
ask = FALSE,
stats, # https://stackoverflow.com/questions/26935095/r-dplyr-filter-not-masking-base-filter#answer-26935536
here,
kableExtra,
rlang,
ggthemes,
tidyverse,
janitor,
magrittr,
glue,
lubridate,
haven,
snakecase,
sandwich,
lmtest,
gganimate,
gapminder,
stargazer,
snakecase
)
# tell here where we are so we can use it elsewhere
here::i_am("R/include.R")
df <- read_csv(here("data/clean/pov_demos_combined.csv"))
df <- as.data.frame(df)
df$pov_tot <- readr::parse_number(df$pov_tot)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:36,38:42, 44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
synth_out <- synth(data.prep.obj = df_out)
path.plot(synth_out, df_out)
gaps.plot(synth_out, df_out)
placebos <- generate.placebos(df_out, synth_out, Sigf.ipop = 3)
plot_placebos(placebos)
mspe.plot(placebos, discard.extreme = TRUE, mspe.limit = 1, plot.hist = TRUE)
df <- read_csv(here("data/clean/pov_demos_combined.csv"))
library(tidyverse)
library(haven)
library(Synth)
library(devtools)
library(SCtools)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:36,38:42, 44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
df <- as.data.frame(df)
df$pov_tot <- readr::parse_number(df$pov_tot)
df_out <- dataprep(
foo = df,
predictors = c("b_h_f_18to64", "b_n_f_18to64"),
predictors.op = "mean",
time.predictors.prior = 2010:2014,
#  special.predictors = list(
#    list("bmprison", c(1988, 1990:1992), "mean"),
#    list("alcohol", 1990, "mean"),
#    list("aidscapita", 1990:1991, "mean"),
#    list("black", 1990:1992, "mean"),
#    list("perc1519", 1990, "mean")),
dependent = "pov_tot",
unit.variable = "fips",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 37,
controls.identifier = c(1,2,4:6,8:13,15:36,38:42, 44:47,49:51,53:56),
time.optimize.ssr = 2010:2014,
time.plot = 2010:2019
)
synth_out <- synth(data.prep.obj = df_out)
path.plot(synth_out, df_out)
